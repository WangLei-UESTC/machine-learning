#include<iostream>
#include<cmath>
using namespace std;


#define K 5

/*void main()
{
	FILE *fp;
	float Iris[60][5] = {
		{ 5.1, 3.5, 1.4, 0.2, 1 },
		{ 4.9, 3, 1.4, 0.2, 1 },
		{ 4.7, 3.2, 1.3, 0.2, 1 },
		{ 4.6, 3.1, 1.5, 0.2, 1 },
		{ 5, 3.6, 1.4, 0.2, 1 },
		{ 5.4, 3.9, 1.7, 0.4, 1 },
		{ 4.6, 3.4, 1.4, 0.3, 1 },
		{ 5, 3.4, 1.5, 0.2, 1 },
		{ 4.4, 2.9, 1.4, 0.2, 1 },
		{ 4.9, 3.1, 1.5, 0.1, 1 },
		{ 5.4, 3.7, 1.5, 0.2, 1 },
		{ 4.8, 3.4, 1.6, 0.2, 1 },
		{ 4.8, 3, 1.4, 0.1, 1 },
		{ 4.3, 3, 1.1, 0.1, 1 },
		{ 5.8, 4, 1.2, 0.2, 1 },
		{ 5.7, 4.4, 1.5, 0.4, 1 },
		{ 5.4, 3.9, 1.3, 0.4, 1 },
		{ 5.1, 3.5, 1.4, 0.3, 1 },
		{ 5.7, 3.8, 1.7, 0.3, 1 },
		{ 5.1, 3.8, 1.5, 0.3, 1 },
		{ 7, 3.2, 4.7, 1.4, 2 },
		{ 6.4, 3.2, 4.5, 1.5, 2 },
		{ 6.9, 3.1, 4.9, 1.5, 2 },
		{ 5.5, 2.3, 4, 1.3, 2 },
		{ 6.5, 2.8, 4.6, 1.5, 2 },
		{ 5.7, 2.8, 4.5, 1.3, 2 },
		{ 6.3, 3.3, 4.7, 1.6, 2 },
		{ 4.9, 2.4, 3.3, 1, 2 },
		{ 6.6, 2.9, 4.6, 1.3, 2 },
		{ 5.2, 2.7, 3.9, 1.4, 2 },
		{ 5, 2, 3.5, 1, 2 },
		{ 5.9, 3, 4.2, 1.5, 2 },
		{ 6, 2.2, 4, 1, 2 },
		{ 6.1, 2.9, 4.7, 1.4, 2 },
		{ 5.6, 2.9, 3.6, 1.3, 2 },
		{ 6.7, 3.1, 4.4, 1.4, 2 },
		{ 5.6, 3, 4.5, 1.5, 2 },
		{ 5.8, 2.7, 4.1, 1, 2 },
		{ 6.2, 2.2, 4.5, 1.5, 2 },
		{ 5.6, 2.5, 3.9, 1.1, 2 },
		{ 6.3, 3.3, 6, 2.5, 3 },
		{ 5.8, 2.7, 5.1, 1.9, 3 },
		{ 7.1, 3, 5.9, 2.1, 3 },
		{ 6.3, 2.9, 5.6, 1.8, 3 },
		{ 6.5, 3, 5.8, 2.2, 3 },
		{ 7.6, 3, 6.6, 2.1, 3 },
		{ 4.9, 2.5, 4.5, 1.7, 3 },
		{ 7.3, 2.9, 6.3, 1.8, 3 },
		{ 6.7, 2.5, 5.8, 1.8, 3 },
		{ 7.2, 3.6, 6.1, 2.5, 3 },
		{ 6.5, 3.2, 5.1, 2, 3 },
		{ 6.4, 2.7, 5.3, 1.9, 3 },
		{ 6.8, 3, 5.5, 2.1, 3 },
		{ 5.7, 2.5, 5, 2, 3 },
		{ 5.8, 2.8, 5.1, 2.4, 3 },
		{ 6.4, 3.2, 5.3, 2.3, 3 },
		{ 6.5, 3, 5.5, 1.8, 3 },
		{ 7.7, 3.8, 6.7, 2.2, 3 },
		{ 7.7, 2.6, 6.9, 2.3, 3 },
		{ 6, 2.2, 5, 1.5, 3 }
	}, sto[K][2], cmp, t, cmp1, f[90][6], js = 0;
	int i, j, c[3] = { 0, 0, 0 }, z, h;
	//if((fp=fopen_s("Iris90.txt","r"))==NULL)

	fopen_s(&fp, "C:/Users/Administrator/Documents/Visual Studio 2013/Projects/Project1/Iris90.txt", "r ");
	if (fp == NULL)
	{
		printf("Can not open the file\n");
	}
	for (i = 0; i<90; i++)
		for (j = 0; j<5; j++)
		{
			fscanf_s(fp, "%f", &f[i][j]);
		}
	for (z = 0; z<90; z++)
	{
		c[0] = 0; c[1] = 0; c[2] = 0;
		for (i = 0; i<K; i++)
		{
			sto[i][0] = sqrt((Iris[i][0] - f[z][0])*(Iris[i][0] - f[z][0]) + (Iris[i][1] - f[z][1])*(Iris[i][1] - f[z][1]) +
				(Iris[i][2] - f[z][2])*(Iris[i][2] - f[z][2]) + (Iris[i][3] - f[z][3])*(Iris[i][3] - f[z][3]));
			sto[i][1] = Iris[i][4];
		}
		for (i = 0; i<K; i++)
			for (j = 0; j<K; j++)
			{
				if (sto[i][0]>sto[j][0])
				{
					cmp = sto[i][0];
					t = sto[i][1];
					sto[i][0] = sto[j][0];
					sto[i][1] = sto[j][1];
					sto[j][0] = cmp;
					sto[j][1] = t;
				}
			}
		for (i = K; i<60; i++)
		{
			cmp1 = sqrt((Iris[i][0] - f[z][0])*(Iris[i][0] - f[z][0]) + (Iris[i][1] - f[z][1])*(Iris[i][1] - f[z][1]) +
				(Iris[i][2] - f[z][2])*(Iris[i][2] - f[z][2]) + (Iris[i][3] - f[z][3])*(Iris[i][3] - f[z][3]));
			if (cmp1<sto[0][0])
			{
				sto[0][0] = cmp1;
				sto[0][1] = Iris[i][4];
				for (h = 0; h<K; h++)
					for (j = 0; j<K; j++)
					{
						if (sto[h][0]>sto[j][0])
						{
							cmp = sto[h][0];
							t = sto[h][1];
							sto[h][0] = sto[j][0];
							sto[h][1] = sto[j][1];
							sto[j][0] = cmp;
							sto[j][1] = t;
						}
					}
			}
		}
		for (i = 0; i<K; i++)
		{
			if ((0.9<sto[i][1]) && (sto[i][1]<1.1))
				c[0]++;
			else if ((1.9<sto[i][1]) && (sto[i][1]<2.1))
				c[1]++;
			else if ((2.9<sto[i][1]) && (sto[i][1]<3.1))
				c[2]++;
		}
		if (c[0]>2)
			f[z][5] = 1.0;
		else if (c[1]>2)
			f[z][5] = 2.0;
		else if (c[2]>2)
			f[z][5] = 3.0;
		else
			f[z][5] = 4.0;
	}
	for (i = 0; i<90; i++)
	{
		for (j = 0; j<6; j++)
		{
			printf("%f ", f[i][j]);
		}
		if (f[i][4] != f[i][5])
			printf("error\n");
		else
		{
			printf("right\n");
			js = js + 1;
		}
	}
	printf("正确的个数：%f\n", js);

	printf("错误的个数：%f\n", 90 - js);

	printf("准确率：%f\n", js / 90.0);

	system("pause");
}*/
